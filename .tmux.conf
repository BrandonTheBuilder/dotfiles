# Loren's Tmux Configuration
# Generated with baseline settings

# ============================================================================
# Prefix Key Configuration
# ============================================================================
# Change prefix from Ctrl-b to Ctrl-f
unbind C-b
set-option -g prefix C-g
bind-key C-f send-prefix

# ============================================================================
# General Settings
# ============================================================================
# Set scrollback history limit to 50000 lines
set-option -g history-limit 50000

# Start window and pane numbering at 0
set-option -g base-index 0
set-window-option -g pane-base-index 0

# Renumber windows when one is closed
set-option -g renumber-windows on

# Enable mouse support for selecting panes, resizing, and scrolling
set-option -g mouse on

# Set default terminal to 256 colors
set-option -g default-terminal "screen-256color"

# Reduce escape time for faster command sequences (especially in vim)
set-option -s escape-time 0

# Enable focus events for vim autoread
set-option -g focus-events on

# ============================================================================
# Vi Mode Configuration
# ============================================================================
# Use vi keybindings in copy mode
set-window-option -g mode-keys vi

# Vi-style copy mode keybindings
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel

# Copy to system clipboard (macOS)
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel "pbcopy"

# Copy mode styling - green background matching active window
set-window-option -g mode-style bg=colour10,fg=black
set-window-option -g clock-mode-colour colour10
set-window-option -g clock-mode-style 12

# Smart copy mode - don't enter if vim is running
# Check if vim/nvim is running, if not enter copy mode
bind-key [ if-shell -F "#{m/ri:(^|\/)n?vim(diff)?$,#{pane_current_command}}" "" "copy-mode"

# ============================================================================
# Pane Splitting
# ============================================================================
# Split panes using v (vertical) and s (horizontal)
bind-key v split-window -h -c "#{pane_current_path}"
bind-key s split-window -v -c "#{pane_current_path}"

# Unbind default split keys
unbind '"'
unbind %

# ============================================================================
# Pane Navigation
# ============================================================================
# Vim-style pane navigation with hjkl
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Arrow key pane navigation
bind-key Left select-pane -L
bind-key Down select-pane -D
bind-key Up select-pane -U
bind-key Right select-pane -R

# ============================================================================
# Pane Resizing
# ============================================================================
# Vim-style pane resizing with Shift+HJKL
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

# ============================================================================
# Window Management
# ============================================================================
# Create new window in home
bind-key c new-window -c "~/"

# ============================================================================
# Status Bar Configuration
# ============================================================================
# Very minimal status bar - just window list
set-option -g status on
set-option -g status-position top
set-option -g status-justify left

# Status bar colors
set-option -g status-style bg=default,fg=white

# Left side: empty for very minimal look
set-option -g status-left ''

# Right side: show time in 12-hour format
set-option -g status-right ' %I:%M %p '

# Window status format
set-window-option -g window-status-format ' #I:#W '
set-window-option -g window-status-current-format ' #I:#W '
# Softer color for active window - light cyan instead of harsh blue
set-window-option -g window-status-current-style bg=colour10,fg=black

# Pane border colors
set-option -g pane-border-style fg=colour240
# Active pane border - colour10 matches vim normal mode green
set-option -g pane-active-border-style fg=colour10

# Add a border line below the status bar
set-option -g pane-border-status top

# ============================================================================
# Activity Monitoring
# ============================================================================
# Monitor for activity in background windows
set-window-option -g monitor-activity on
# Don't show messages for activity, just highlight in status bar
set-option -g visual-activity off

# ============================================================================
# Reload Configuration
# ============================================================================
# Reload config file with Prefix + r
bind-key r source-file ~/.tmux.conf \; display-message "Config reloaded!"
